<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/form/ToggleComponent.vue</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/form/ToggleComponent.vue</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
	&lt;button class="toggle not-button" @click="doToggle" type="button" :aria-pressed="pressed" :aria-expanded="expanded">{{toggleState}}&lt;/button>
&lt;/template>

&lt;script>
	/**
	 * A component to put a toggle button in a form
	 * @module
	 * @vue-prop {String|String[]} [symbols = ["-", "+"]] Strings to use to represent the values of the toggle. The symbol indexes should map the to vals indexes
	 * @vue-prop {Array} [vals=[true,false]] values the toggle toggles to. Toggling increases the value index by 1 and then loops around to 0
	 * @vue-prop {Boolean|String|Number|Object} val the current value of the toggle
	 * @vue-prop {Boolean} [translate=false] should the symbols be translated?
	 * @vue-prop {Boolean|String} [clear=false] should toggling also clear a field on the form? True clears the field of the same name as the toggle, a string will clear the field at the given path
	 * @vue-prop {String} field the field that is being toggled
	 * @vue-prop {Array} [clearOn] an array of values that the should clear the field supplied by clear. If this property is not supplied, all toggles will clear the clear field
	 * @vue-prop {Boolean} [expandable=false] does this toggle expand a menu?
	 * @vue-computed {String} toggleState the label taken from symbols to describe the toggle's current state
	 * @vue-computed {Number} index the index the current value has in the vals array
	 * @vue-computed {Boolean} expanded is the menu this toggle expands exapnded?
	 * @vue-computed {Boolean} expanded should screen readers read this button as pressed?
	 */
	export default {
		name: "toggle",
		data: function() {
			return {}
		},
		props: {
			symbols: {
				type: [Array, String],
				default: function() {
					return ["-", "+"]
				}
			},
			val: [Boolean, String, Number, Object],
			translate: {
				type: Boolean,
				default: false
			},
			vals: {
				type: Array,
				default: function() {
					return [true, false]
				}
			},
			clear: {
				type: [Boolean, String],
				default: false
			},
			clearOn: {
				type: Array,
				required: false
			},
			expandable: {
				type: Boolean,
				required: false
			}
		},
		computed: {
			toggleState: function() {
				let key = typeof this.symbols == "string" ? this.symbols : this.symbols[this.index]
				return this.translate ? I18n.t(key) : key
			},
			index: function() {
				// look for the current value in the vals array
				if (this.val !== undefined) {
					return this.vals.indexOf(this.val);
				}

				// otherwise, look for the first falsy value
				for (let i = 0; i &lt; this.vals.length; i++) {
					if (!this.vals[i]) {
						return i;
					}
				}

				// default to 0
				return 0;
			},
			expanded: function() {
				if (!this.expandable) {return;}
				// return a boolean string
				return (!!this.val).toString();
			},
			pressed: function() {
				// return a boolean string
				return (!!this.val).toString();
			}
		},
		methods: {
			/**
			 * Toggle to the next value
			 * @emits module:components/form/ToggleComponent~toggle-event
			 */
			doToggle() {
				let new_ind = this.index + 1;
				// loop around to 0 if need be
				if (new_ind == this.vals.length) {
					new_ind = 0;
				}

				// get the new value
				let new_val = this.vals[new_ind]
				// check if this toggle should clear
				let clear = null;
				if (this.clear &amp;&amp; (this.clearOn === undefined || this.clearOn.indexOf(new_val) >= 0)) {
					clear = this.clear
				}
				// emit the event
				this.$emit("toggle-event", this.$attrs.field, new_val,clear)
			}
		},
		mounted: function() {
			if (process.NODE_ENV !== 'production') {
				// check for mismatched symbols and values ammount
				if (typeof this.symbols == "object" &amp;&amp; this.symbols.length != this.vals.length) {
					console.warn("Toggle component has a mismatched number of values and symbols");
				}
			}
		}
	}

	/**
	 * An event to toggle a state
	 * @event module:components/form/ToggleComponent~toggle-event
	 * @property {string} field the field to toggle
	 * @property {Boolean|String} newVal the value to set the toggled field to
	 * @property {?String} clearField the name of the field that is cleared with this toggle
	 */
&lt;/script>
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-components_form_FieldErrorsComponent.html">components/form/FieldErrorsComponent</a></li><li><a href="module-components_form_FormErrorsComponent.html">components/form/FormErrorsComponent</a></li><li><a href="module-components_form_ToggleComponent.html">components/form/ToggleComponent</a></li><li><a href="module-components_form_VuelidateFormComponent.html">components/form/VuelidateFormComponent</a></li><li><a href="module-components_NavComponent.html">components/NavComponent</a></li><li><a href="module-components_Root.html">components/Root</a></li><li><a href="module-components_stepper_BasicStepperComponent.html">components/stepper/BasicStepperComponent</a></li><li><a href="module-components_stepper_FormStepComponent.html">components/stepper/FormStepComponent</a></li><li><a href="module-components_stepper_FormStepperComponent.html">components/stepper/FormStepperComponent</a></li><li><a href="module-transitions.html">transitions</a></li><li><a href="module-turbolinksFixes.html">turbolinksFixes</a></li><li><a href="module-validators.html">validators</a></li></ul><h3>Events</h3><ul><li><a href="module-components_form_FieldErrorsComponent.html#~event:input-blur">input-blur</a></li><li><a href="module-components_form_ToggleComponent.html#~event:toggle-event">toggle-event</a></li><li><a href="module-components_stepper_FormStepComponent.html#~event:step-ready">step-ready</a></li></ul><h3>Mixins</h3><ul><li><a href="renderless.html">renderless</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Mar 04 2019 18:06:42 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
